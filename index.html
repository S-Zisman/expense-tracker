<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Luxury Expense Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="stars"></div>
    <div class="container">
        <header>
            <div class="logo">üí∞</div>
            <h1>Luxury Expense Tracker</h1>
            <p class="tagline">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ —Å —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ—Å—Ç—å—é</p>
        </header>

        <main>
            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ -->
            <section class="expense-form-section">
                <h2>–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h2>
                <form id="expenseForm">
                    <div class="form-group">
                        <label for="amount">–°—É–º–º–∞</label>
                        <input type="number" id="amount" name="amount" required min="0" step="0.01" placeholder="0.00">
                    </div>

                    <div class="form-group">
                        <label for="expenseCurrency">–í–∞–ª—é—Ç–∞ —Ä–∞—Å—Ö–æ–¥–∞</label>
                        <select id="expenseCurrency" name="expenseCurrency" required>
                            <option value="ILS">‚Ç™ –®–µ–∫–µ–ª–∏ (ILS)</option>
                            <option value="USD">$ –î–æ–ª–ª–∞—Ä—ã (USD)</option>
                            <option value="RUB">‚ÇΩ –†—É–±–ª–∏ (RUB)</option>
                            <option value="EUR">‚Ç¨ –ï–≤—Ä–æ (EUR)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <div style="display: flex; gap: 10px;">
                            <select id="category" name="category" required style="flex: 1;">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                            </select>
                            <button type="button" class="btn" onclick="showCategoriesModal()" style="padding: 15px 20px; background: rgba(255, 215, 0, 0.2); color: var(--gold); border: 1px solid var(--gold); white-space: nowrap;">
                                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <input type="text" id="description" name="description" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ" maxlength="100">
                    </div>

                    <div class="form-group">
                        <label for="expenseDate">–î–∞—Ç–∞</label>
                        <input type="date" id="expenseDate" name="expenseDate" required>
                    </div>

                    <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
                </form>
            </section>

            <!-- –§–∏–ª—å—Ç—Ä –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
            <section class="filter-section">
                <h2>–§–∏–ª—å—Ç—Ä –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</h2>
                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="filterCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="filterCategory">
                            <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="sortBy">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                        <select id="sortBy">
                            <option value="date-desc">–î–∞—Ç–∞ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–µ)</option>
                            <option value="date-asc">–î–∞—Ç–∞ (—Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–≤—ã–µ)</option>
                            <option value="amount-desc">–°—É–º–º–∞ (–±–æ–ª—å—à–∏–µ –ø–µ—Ä–≤—ã–µ)</option>
                            <option value="amount-asc">–°—É–º–º–∞ (–º–∞–ª–µ–Ω—å–∫–∏–µ –ø–µ—Ä–≤—ã–µ)</option>
                            <option value="category">–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ê-–Ø)</option>
                        </select>
                    </div>

                </div>
            </section>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
            <section class="stats-section">
                <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>
                <div id="categoryStats" class="category-stats">
                    <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>
                </div>
                <div class="total-expense">
                    <h3>–û–±—â–∞—è —Å—É–º–º–∞: <span id="totalAmount">0.00</span> <span id="totalCurrency">‚Ç™</span></h3>
                </div>
            </section>

            <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
            <section class="calendar-section">
                <h2>–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                <div class="calendar-controls">
                    <button id="prevMonth" class="btn btn-calendar">‚Äπ</button>
                    <h3 id="currentMonth"></h3>
                    <button id="nextMonth" class="btn btn-calendar">‚Ä∫</button>
                </div>
                <div id="calendar" class="calendar-grid">
                    <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è...</p>
                </div>
            </section>

            <!-- –°–ø–∏—Å–æ–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
            <section class="expenses-section">
                <h2>–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                <div id="expensesList" class="expenses-list">
                    <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤...</p>
                </div>
            </section>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –≤–∞–ª—é—Ç—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ -->
    <div id="currencyModal" class="modal">
        <div class="modal-content">
            <div class="modal-logo">üí∞</div>
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –æ—Å–Ω–æ–≤–Ω—É—é –≤–∞–ª—é—Ç—É</h2>
            <p class="modal-description">–≠—Ç–æ –≤–∞–ª—é—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞. –í—ã –≤—Å–µ–≥–¥–∞ —Å–º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –≤ –ª—é–±–æ–π –≤–∞–ª—é—Ç–µ.</p>

            <div class="currency-options">
                <div class="currency-option" data-currency="ILS">
                    <div class="currency-symbol">‚Ç™</div>
                    <div class="currency-name">–®–µ–∫–µ–ª–∏</div>
                    <div class="currency-code">ILS</div>
                </div>
                <div class="currency-option" data-currency="USD">
                    <div class="currency-symbol">$</div>
                    <div class="currency-name">–î–æ–ª–ª–∞—Ä—ã</div>
                    <div class="currency-code">USD</div>
                </div>
                <div class="currency-option" data-currency="RUB">
                    <div class="currency-symbol">‚ÇΩ</div>
                    <div class="currency-name">–†—É–±–ª–∏</div>
                    <div class="currency-code">RUB</div>
                </div>
                <div class="currency-option" data-currency="EUR">
                    <div class="currency-symbol">‚Ç¨</div>
                    <div class="currency-name">–ï–≤—Ä–æ</div>
                    <div class="currency-code">EUR</div>
                </div>
            </div>

            <button id="saveCurrencyBtn" class="btn btn-primary" disabled>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
    <div id="categoriesModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h2>
            <p class="modal-description">–î–æ–±–∞–≤–ª—è–π—Ç–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏–ª–∏ —É–¥–∞–ª—è–π—Ç–µ —Å–≤–æ–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</p>

            <div class="categories-container">
                <div class="add-category-form">
                    <input type="text" id="newCategoryInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" maxlength="50">
                    <button onclick="addCategory()" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>

                <div id="categoriesList" class="categories-list">
                    <!-- –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <button onclick="closeCategoriesModal()" class="btn" style="margin-top: 20px; background: rgba(255, 255, 255, 0.1);">
                –ó–∞–∫—Ä—ã—Ç—å
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="app.js"></script>
</body>
</html>
